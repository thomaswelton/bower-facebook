define("text",{}),define("json",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("json!data",function(){return{languages:["user_likes"],bio:["user_about_me","friends_about_me"],birthday:["user_birthday","friends_birthday"],education:["user_education_history","friends_education_history"],email:["email"],hometown:["user_hometown","friends_hometown"],interested_in:["user_relationship_details","friends_relationship_details"],location:["user_location","friends_location"],political:["user_religion_politics","friends_relationship_details"],favorite_athletes:["user_likes","friends_likes"],favorite_teams:["user_likes","friends_likes"],quotes:["user_about_me","friends_about_me"],relationship_status:["user_relationships","friends_relationships"],religion:["user_religion_politics","friends_religion_politics"],significant_other:["user_religion_politics","friends_religion_politics"],website:["user_religion_politics","friends_religion_politics"],work:["user_religion_politics","friends_religion_politics"]}}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},r=[].slice,i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("Facebook",["EventEmitter","module","json!data"],function(t,s,o){var u;return u=function(t){function s(t){var n,r,i,o,u=this;this.config=t,this.fbiFrameInit=e(this.fbiFrameInit,this),this.fbInit=e(this.fbInit,this),this.fbAsyncInit=e(this.fbAsyncInit,this),this.onReady=e(this.onReady,this),this.requireUserInfo=e(this.requireUserInfo,this),this.getUserInfo=e(this.getUserInfo,this),this.getPermissions=e(this.getPermissions,this),this.getLoginStatus=e(this.getLoginStatus,this),this.login=e(this.login,this),this.requestPermission=e(this.requestPermission,this),this.hasPermissions=e(this.hasPermissions,this),this.logout=e(this.logout,this),this.ui=e(this.ui,this),s.__super__.constructor.call(this),console.log("Facebook init"),n={status:!0,cookie:!0,xfbml:!0},o=this.config;for(r in o)i=o[r],n[r]=i;this.config=n,this.api=null,this.isIframe=top!==self,typeof FB!="undefined"&&FB!==null?this.fbAsyncInit():(window.fbAsyncInit=this.fbAsyncInit,this.injectFB()),this.onReady(function(e){return e.Event.subscribe("edge.create",function(e){return u.fireEvent("onLike",e)}),e.Event.subscribe("edge.remove",function(e){return u.fireEvent("onUnlike",e)})})}return n(s,t),s.prototype.ui=function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.onReady(function(t){return t.ui.apply(t,e)})},s.prototype.logout=function(e){var t=this;return this.onReady(function(n){var r;console.log(t.loginStatus);if(((r=t.loginStatus)!=null?r.status:void 0)!=null&&t.loginStatus.status==="connected")return n.logout(function(t){if(typeof e=="function")return e(t)});console.warn("User is already logged out");if(typeof e=="function")return e()})},s.prototype.hasPermissions=function(e){var t,n,r;return e.trim().length===0?!0:(r=e.split(","),n=function(e,t){var n,r,s,o,u;e.length>t.length&&(o=[t,e],e=o[0],t=o[1]),u=[];for(r=0,s=e.length;r<s;r++)n=e[r],i.call(t,n)>=0&&u.push(n);return u},t=n(r,this.grantedPermissions),t.length===r.length)},s.prototype.requestPermission=function(e,t){var n=this;return FB.ui({method:"oauth",scope:e,display:"popup"},function(){n.getPermissions();if(typeof t=="function")return t()})},s.prototype.login=function(e){var t,n,r,i,s=this;return r=e.scope!=null?e.scope.trim():"",n=e.onLogin!=null?e.onLogin:function(){},t=e.onCancel!=null?e.onCancel:function(){},((i=this.loginStatus)!=null?i.status:void 0)!=null&&this.loginStatus.status==="connected"?this.hasPermissions(r)?n(this.loginStatus.authResponse):(console.log("request",r),this.requestPermission(r,function(e){return n(s.loginStatus.authResponse)})):this.onReady(function(n){return n.login(function(n){if(!n.authResponse)return t();if(e.onLogin!=null)return e.onLogin(n.authResponse)},r)})},s.prototype.getLoginStatus=function(e){var t=this;return FB.getLoginStatus(function(n){t.loginStatus=n,console.log("Login Status:",t.loginStatus);if(typeof e=="function")return e(t.loginStatus)})},s.prototype.getPermissions=function(e){var t=this;return this.onReady(function(n){return n.api("/me?fields=permissions,id,name,first_name,middle_name,last_name,gender,locale,link,username",function(n){var r;t.grantedPermissions=function(){var e;e=[];for(r in n.permissions.data[0])e.push(r);return e}();if(typeof e=="function")return e(t.grantedPermissions)})})},s.prototype.getUserInfo=function(e,t){var n,r=this;return n=e.join(","),this.onReady(function(e){return e.api("/me?fields="+n,function(e){if(typeof t=="function")return t(e)})})},s.prototype.requireUserInfo=function(e,t){var n,r,i,s,u=this;return i=function(){var t,r,i;i=[];for(t=0,r=e.length;t<r;t++)n=e[t],o[n]!=null&&i.push(o[n]);return i}(),s=i.join(","),console.log("require",s),r=function(){return u.getUserInfo(e,t)},this.hasPermissions(s)?r():this.requestPermission(s,r)},s.prototype.onReady=function(e){var t=this;return typeof FB!="undefined"&&FB!==null?e(FB):this.once("fbInit",function(){return e(FB)})},s.prototype.fbAsyncInit=function(){this.fbInit();if(this.isIframe)return this.fbiFrameInit()},s.prototype.fbInit=function(){var e=this;return FB.init({appId:this.config.appId,channelUrl:this.config.channelUrl,status:this.config.status,cookie:this.config.cookie,xfbml:this.config.xfbml}),this.getLoginStatus(function(t){return t.status==="connected"?e.getPermissions(function(){return e.fireEvent("fbInit")}):e.fireEvent("fbInit")}),FB.Event.subscribe("auth.login",function(t){return e.loginStatus=t,console.log("FB.Event: auth.login"),e.fireEvent("onLogin")}),FB.Event.subscribe("auth.statusChange",function(t){return e.loginStatus=t,console.log("FB.Event: auth.statusChange"),e.fireEvent("onStatusChange")}),FB.Event.subscribe("auth.authResponseChange",function(t){return e.loginStatus=t,console.log("FB.Event: auth.authResponseChange"),e.fireEvent("onAuthChange",e.loginStatus.status==="connected")})},s.prototype.fbiFrameInit=function(){var e;FB.Canvas.scrollTo(0,0),FB.Canvas.setSize({width:810,height:document.body.offsetHeight});if(this.config.autoResize!=null&&this.config.autoResize)return e=function(){return FB.Canvas.setSize({width:810,height:document.body.offsetHeight})},window.setInterval(e,500)},s.prototype.injectFB=function(){var e,t;if(document.getElementById("facebook-jssdk"))return;return document.getElementById("fb-root")||(t=document.createElement("div"),t.setAttribute("id","fb-root"),document.body.appendChild(t)),e=location.protocol==="https:"?"https:":"http:",requirejs([e+"//connect.facebook.net/en_US/all.js"])},s.prototype.renderPlugins=function(e){return this.onReady(function(){var t,n,r,i,s,o,u;if(document.querySelectorAll!=null){r=document.body.querySelectorAll(".fb-like:not([fb-xfbml-state=rendered])"),i=r.length,t=function(){i--;if(i===0)return e()},u=[];for(s=0,o=r.length;s<o;s++)n=r[s],u.push(FB.XFBML.parse(document.body,t));return u}return FB.XFBML.parse(document.body,e)})},s.prototype.getCanvasInfo=function(e){return this.onReady(function(t){return t.Canvas.getPageInfo(function(t){return e(t)})})},s.prototype.setCanvasSize=function(e,t){return this.onReady(function(n){return n.Canvas.setSize({width:e,height:t})})},s}(t),new u(s.config())})}.call(this);