(function(){var t=function(t,n){return function(){return t.apply(n,arguments)}},n={}.hasOwnProperty,e=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},i=[].slice;define(["EventEmitter","module","jquery"],function(n,o,r){var s;return s=function(n){function o(n){var e=this;this.config=n,this.fbiFrameInit=t(this.fbiFrameInit,this),this.fbInit=t(this.fbInit,this),this.fbAsyncInit=t(this.fbAsyncInit,this),this.onReady=t(this.onReady,this),this.login=t(this.login,this),this.ui=t(this.ui,this),this.api=null,this.isIframe=top!==self,o.__super__.constructor.call(this),"undefined"!=typeof FB&&null!==FB?this.fbAsyncInit():(window.fbAsyncInit=this.fbAsyncInit,this.injectFB()),this.onReady(function(t){return t.Event.subscribe("edge.create",function(t){return e.fireEvent("onLike",t)}),t.Event.subscribe("edge.remove",function(t){return e.fireEvent("onUnlike",t)})})}return e(o,n),o.prototype.ui=function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],this.onReady(function(n){return n.ui.apply(n,t)})},o.prototype.login=function(t,n){var e;return null!=(null!=(e=this.loginStatus)?e.status:void 0)&&"connected"===this.loginStatus.status?t(this.loginStatus):this.onReady(function(e){return e.login(t,n)})},o.prototype.onReady=function(t){return"undefined"!=typeof FB&&null!==FB?t(FB):this.addEvent("fbInit",function(){return t(FB)})},o.prototype.fbAsyncInit=function(){var t=this;return this.fbInit(),this.isIframe&&this.fbiFrameInit(),FB.getLoginStatus(function(n){t.loginStatus=n}),this.fireEvent("fbInit")},o.prototype.fbInit=function(){return FB.init({appId:this.config.appId,channelUrl:this.config.channelUrl,status:!0,cookie:!0,xfbml:!0})},o.prototype.fbiFrameInit=function(){var t;return FB.Canvas.scrollTo(0,0),FB.Canvas.setSize({width:810,height:document.body.offsetHeight}),t=function(){return FB.Canvas.setSize({width:810,height:document.body.offsetHeight})},window.setInterval(t,500)},o.prototype.injectFB=function(){var t;return console.log(r("facebook-jssdk")),r("facebook-jssdk")?void 0:(r("fb-root")||new Element("div",{id:"fb-root"}).inject(document.body),t=new Element("script",{async:!0,src:"//connect.facebook.net/en_US/all.js"}).inject($$("script")[0],"before"))},o.prototype.renderPlugins=function(t){return this.onReady(function(){var n,e,i,o,s;for(e=r(".fb-like:not([fb-xfbml-state=rendered])"),s=[],i=0,o=e.length;o>i;i++)n=e[i],s.push(FB.XFBML.parse(n.getParent(),t));return s})},o.prototype.getCanvasInfo=function(t){return this.onReady(function(n){return n.Canvas.getPageInfo(function(n){return t(n)})})},o.prototype.setCanvasSize=function(t,n){return this.onReady(function(e){return e.Canvas.setSize({width:t,height:n})})},o}(n),new s(o.config())})}).call(this);